{
    "$schema": "../schema.json",
    "meta": {
        "id": "huperzine-a-terashima-1998",
        "molecule_name": "Huperzine A",
        "class": "Natural Product",
        "author": "Terashima",
        "year": 1998
    },
    "sequence": [
        {
            "step_id": "1",
            "reaction_type": "Asymmetric Desymmetrizing Ring Opening / Esterification",
            "reagents": "quinine, BnOH",
            "reagent_smiles": "",
            "conditions": "",
            "yield": "",
            "reactant_smiles": "O=C1OC(=O)[C@H]2[C@H]1[C@H]3OC=C[C@H]3[C@H]2",
            "product_smiles": "O=C(O)[C@H]1[C@H]2[C@H]3OC=C[C@H]3[C@H]2C(=O)OCC4=CC=CC=C4",
            "notes": "Desymmetrizing ring opening of a cyclic anhydride with benzyl alcohol, catalyzed by quinine, resulting in a monoester/monoacid.",
            "substeps": []
        },
        {
            "step_id": "2",
            "reaction_type": "Acylation / Mixed Anhydride Formation",
            "reagents": "",
            "reagent_smiles": "CCOC(=O)Cl",
            "conditions": "",
            "yield": "",
            "reactant_smiles": "O=C(O)[C@H]1[C@H]2O[C@H](C=C[C@H]12)C(=O)OCC1=CC=CC=C1",
            "product_smiles": "CCOC(=O)O[C@H]1C(=O)[C@H]2O[C@H](C=C[C@H]12)C(=O)OCC1=CC=CC=C1",
            "notes": "Acylation of a carboxylic acid with ethyl chloroformate to form an ethyl carbonic mixed anhydride.",
            "substeps": []
        },
        {
            "step_id": "3",
            "reaction_type": "Reduction and Lactonization",
            "reagents": "NaBH4, then aq HCl",
            "reagent_smiles": "",
            "conditions": "",
            "yield": "",
            "reactant_smiles": "CCOC(=O)OC(=O)[C@@H]1[C@@H]2C=C[C@@H]([C@@H]1C(=O)OCC3=CC=CC=C3)O2",
            "product_smiles": "O=C1OC[C@@H]2[C@@H]1C=C[C@@H]3O[C@H]2C3",
            "notes": "Reduction of one carboxylic acid derivative to an alcohol, hydrolysis of the other, followed by intramolecular esterification (lactone formation).",
            "substeps": []
        },
        {
            "step_id": "4",
            "reaction_type": "Hydrogenation",
            "reagents": "",
            "reagent_smiles": "[H][H].[Pd]",
            "conditions": "EtOAc",
            "yield": "",
            "reactant_smiles": "O=C1OC[C@@H]2[C@@H]1[C@@H]3O[C@H](C=C3)C2",
            "product_smiles": "O=C1OC[C@@H]2[C@@H]1[C@@H]3OC[C@H]C3C2",
            "notes": "Hydrogenation of the endocyclic alkene in the bicyclic lactone.",
            "substeps": []
        },
        {
            "step_id": "5",
            "reaction_type": "Alkylation / Rearrangement / Silylation",
            "reagents": "KHMDS, 18-crown-6, methallyl bromide",
            "reagent_smiles": "",
            "conditions": "",
            "yield": "",
            "reactant_smiles": "O=C1OC[C@H]2O[C@@H]3CCC[C@@H]1[C@H]23",
            "product_smiles": "C=C(C)[CH2][C@@]12C=C[C@@H](C[C@@H]1[C@@H]2COC(=O))[OTMS]",
            "notes": "Base-mediated deprotonation, alkylation with methallyl bromide, followed by rearrangement of the bicyclic core and silylation to form an OTMS group (implying a TMS source such as TMSCl, although not explicitly listed in reagents).",
            "substeps": []
        },
        {
            "step_id": "6",
            "reaction_type": "Deprotection (TMS ether hydrolysis)",
            "reagents": "TBAF",
            "reagent_smiles": "",
            "conditions": "",
            "yield": "80% (2 steps)",
            "reactant_smiles": "CC(=C)C[C@@]12C(=O)OC[C@H]2C=CCC([C@H]([OTMS]))1",
            "product_smiles": "CC(=C)C[C@@]12C(=O)OC[C@H]2C=CCC([C@H](O))1",
            "notes": "Deprotection of a silyl ether (OTMS) to a hydroxyl group using TBAF.",
            "substeps": []
        },
        {
            "step_id": "7",
            "reaction_type": "Epoxidation",
            "reagents": "VO(OEt)3, TBHP",
            "reagent_smiles": "",
            "conditions": "MS 4A",
            "yield": "95%",
            "reactant_smiles": "CC(=C)C[C@]12C=CC[C@@H](O)[C@H]1[C@@H]2COC(=O)",
            "product_smiles": "CC(=C)C[C@]12[C@H]1[C@@H](O)[C@@]3O[C@H]3C[C@@H]2COC(=O)",
            "notes": "Allylic alcohol directed epoxidation of the internal alkene.",
            "substeps": []
        },
        {
            "step_id": "8",
            "reaction_type": "Swern oxidation",
            "reagents": "CH2Cl2",
            "reagent_smiles": "ClC(=O)C(=O)Cl.CS(=O)C.CC(C)N(CC)C(C)C",
            "conditions": "",
            "yield": "95%",
            "reactant_smiles": "CC(=C)C[C@]12[C@H](O)C[C@@H]3O[C@H]3C[C@H]1[C@H](COC2=O)",
            "product_smiles": "C=C(C[C@]12[C@@H](COC1=O)C(=O)C=C[C@H]2O)",
            "notes": "Oxidation of a secondary alcohol to a ketone, accompanied by epoxide opening and rearrangement to form an α,β-unsaturated ketone (enone) with an adjacent hydroxyl group.",
            "substeps": []
        },
        {
            "step_id": "9",
            "reaction_type": "Acid-catalyzed rearrangement/cyclization",
            "reagents": "cat. PTSA",
            "reagent_smiles": "",
            "conditions": "CH2Cl2",
            "yield": "61%",
            "reactant_smiles": "CC(=C)C[C@@]1(O)[C@H]2C=CC(=O)[C@@H](COC2=O)C1",
            "product_smiles": "CC1=C[C@]23C(=O)C[C@@H]4[C@H]5[C@@H](C(=O)O)OC(=O)C4C251",
            "notes": "Acid-catalyzed rearrangement and cyclization of a bicyclic dienone-lactone with an isopropenyl group to a complex tricyclic bridged lactone containing a carboxylic acid and a ketone.",
            "substeps": []
        },
        {
            "step_id": "10",
            "reaction_type": "Alcohol Protection",
            "reagents": "MOMCl, i-Pr2NEt, TBAI",
            "reagent_smiles": "",
            "conditions": "THF, reflux",
            "yield": "",
            "reactant_smiles": "CC1=CC2C3CC(O)C(=O)OC3CC2C(=O)C1",
            "product_smiles": "COCOC1C2C=C(C)CC31C(COC3=O)C(=O)C2",
            "notes": "Protection of secondary alcohol to methoxymethyl (MOM) ether.",
            "substeps": []
        },
        {
            "step_id": "11",
            "reaction_type": "Lactone opening / Hydrolysis / Thioether formation",
            "reagents": "KOH, PhSH",
            "reagent_smiles": "",
            "conditions": "MeOH, reflux",
            "yield": "90% (2 steps)",
            "reactant_smiles": "COCOC1C2C=C(C)C3C1C(=O)C4C2C(OC(=O)C4)C3",
            "product_smiles": "O=C(O)C1C(OCOC)C2C1C(=O)C3C2C1=C(C)C(CS[Ph])C31",
            "notes": "This reaction involves the opening and hydrolysis of the gamma-lactone under basic conditions (KOH, MeOH), followed by a nucleophilic addition of thiophenol (PhSH) to the carbon that was formerly part of the lactone methylene. This results in the formation of a carboxylic acid and a thioether. The MOMO protecting group, the ketone, and the alkene remain intact throughout the transformation.",
            "substeps": []
        },
        {
            "step_id": "12",
            "reaction_type": "Curtius rearrangement",
            "reagents": "DPPA, Et3N",
            "reagent_smiles": "",
            "conditions": "PhH, reflux",
            "yield": "",
            "reactant_smiles": "[MOMO]C1(C(=O)O)[C@@H]2C[C@H](CS[Ph])[C@@H]3[C@H]1C=C(C)C23",
            "product_smiles": "[MOMO]C1(N=C=O)[C@@H]2C[C@H](CS[Ph])[C@@H]3[C@H]1C=C(C)C23",
            "notes": "Carboxylic acid is converted to an isocyanate via Curtius rearrangement, retaining the bicyclic core, ketone, methyl, MOMO, and SPh groups.",
            "substeps": []
        },
        {
            "step_id": "13",
            "reaction_type": "Nucleophilic Addition / Carbamate Formation",
            "reagents": "MeOH",
            "reagent_smiles": "",
            "conditions": "reflux",
            "yield": "89% (2 steps)",
            "reactant_smiles": "[MOMO][C@H]1C[C@@]2(N=C=O)N3C[C@H](C(=O)[C@H]4CSCc5ccccc5)[C@H]3C=C([Me])[C@@H]12",
            "product_smiles": "[MOMO][C@H]1C[C@@]2(NC(=O)O[Me])N3C[C@H](C(=O)[C@H]4CSCc5ccccc5)[C@H]3C=C([Me])[C@@H]12",
            "notes": "Addition of methanol to the isocyanate group to form a methyl carbamate.",
            "substeps": []
        },
        {
            "step_id": "14",
            "reaction_type": "Sulfide Oxidation",
            "reagents": "m-CPBA",
            "reagent_smiles": "",
            "conditions": "CH2Cl2",
            "yield": "",
            "reactant_smiles": "COC(=O)N[C@H]1[C@@H](CS[Ph])C(=O)C2CC=C(C)C2[C@@H]1[MOMO]",
            "product_smiles": "COC(=O)N[C@H]1[C@@H](CS(=O)[Ph])C(=O)C2CC=C(C)C2[C@@H]1[MOMO]",
            "notes": "Oxidation of phenyl sulfide to phenyl sulfoxide using m-CPBA.",
            "substeps": []
        },
        {
            "step_id": "15",
            "reaction_type": "Sulfoxide Elimination",
            "reagents": "K2CO3",
            "reagent_smiles": "",
            "conditions": "toluene, reflux",
            "yield": "95% (2 steps)",
            "reactant_smiles": "CC1=CC2CC(=O)C(CS(=O)c3ccccc3)C1(C2OC(OC))NC(=O)OC",
            "product_smiles": "C=C1C(=O)CC2C=C(CC1(C2OC(OC))NC(=O)OC)",
            "notes": "Sulfoxide elimination leading to an exocyclic alkene. The phenylsulfinylmethyl group is removed to form a terminal alkene.",
            "substeps": []
        },
        {
            "step_id": "16",
            "reaction_type": "Michael reaction",
            "reagents": "KOT-Bu",
            "reagent_smiles": "CN(C)C(=O)CS(=O)c1ccccc1",
            "conditions": "",
            "yield": "",
            "reactant_smiles": "COC(O[C@]1(N(C(=O)OC))[C@@H]2C=C[C@@H](C)C[C@H]1C(=C)C(=O)C2)",
            "product_smiles": "COC(O[C@]1(N(C(=O)OC))[C@@H]2C=C[C@@H](C)C[C@H]1C(=O)[C@H](C(=O)N(C)C)[C@@H](S(=O)c3ccccc3)C2)",
            "notes": "Michael addition of N,N-dimethyl-2-(phenylsulfinyl)acetamide to an enone.",
            "substeps": []
        },
        {
            "step_id": "17",
            "reaction_type": "Pummerer rearrangement / Lactone cyclization",
            "reagents": "toluene",
            "reagent_smiles": "",
            "conditions": "reflux",
            "yield": "65%",
            "reactant_smiles": "[Me]C1=CC2CC(=O)C(C([CONMe2])S(=O)[Ph])C(C1)(C2)([MOMO])([NHCO2Me])",
            "product_smiles": "[Me]C1C=C2CC3C=COC(=O)C3C1(C2)([MOMO])([NHCO2Me])",
            "notes": "Transformation involves the loss of a sulfoxide and amide, followed by cyclization to form a 6-membered alpha,beta-unsaturated lactone. Yield refers to 2 steps.",
            "substeps": []
        },
        {
            "step_id": "18",
            "reaction_type": "Lactone Aminolysis / Ester to Amide Conversion",
            "reagents": "aq NH3",
            "reagent_smiles": "",
            "conditions": "reflux",
            "yield": "",
            "reactant_smiles": "CN(C(=O)OC)C1([MOMO])C2CC3C(C(C)C=C2)C3C4C1C(=O)OC=C4",
            "product_smiles": "CN(C(=O)OC)C1([MOMO])C2CC3C(C(C)C=C2)C3C4C1C(=O)NC=C4",
            "notes": "Conversion of a lactone to a lactam using aqueous ammonia under reflux conditions.",
            "substeps": []
        },
        {
            "step_id": "19",
            "reaction_type": "O-alkylation",
            "reagents": "Ag2CO3, CHCl3",
            "reagent_smiles": "CI",
            "conditions": "reflux",
            "yield": "52% (2 steps)",
            "reactant_smiles": "C[C@@H]1C=C[C@H]2[C@H]3C4=CC(=O)N[C@]5C4=CC2[C@@]3([C@H]15)N(C(=O)OC)[MOMO]",
            "product_smiles": "C[C@@H]1C=C[C@H]2[C@H]3C4=CC(OC)=NC5C4=CC2[C@@]3([C@H]15)N(C(=O)OC)[MOMO]",
            "notes": "O-alkylation of a lactam/pyridone to form a methoxypyridine using methyl iodide and silver carbonate.",
            "substeps": []
        },
        {
            "step_id": "20",
            "reaction_type": "Deprotection",
            "reagents": "TMSCl, NaI",
            "reagent_smiles": "Cl[Si](C)(C)C.[Na+].[I-].CC#N",
            "conditions": "MeCN",
            "yield": "",
            "reactant_smiles": "[MOM]O1C2C(C(C3=NC(OC)=CC=C3)=CC2)(NC(=O)OC)C=C(C)C1",
            "product_smiles": "OC1C2C(C(C3=NC(OC)=CC=C3)=CC2)(NC(=O)OC)C=C(C)C1",
            "notes": "Deprotection of a methoxymethyl (MOM) ether to a hydroxyl group.",
            "substeps": []
        },
        {
            "step_id": "21",
            "reaction_type": "Swern oxidation",
            "reagents": "(COCl)2, DMSO, i-Pr2NEt, CH2Cl2",
            "reagent_smiles": "",
            "conditions": "CH2Cl2",
            "yield": "95%",
            "reactant_smiles": "COC1=NC2=C(C=C1)C3C4[C@H](O)[C@@H](NC(=O)OC)C4C5C=C(C)C35C2",
            "product_smiles": "COC1=NC2=C(C=C1)C3C4C(=O)C(NC(=O)OC)C4C5C=C(C)C35C2",
            "notes": "Oxidation of a secondary alcohol to a ketone.",
            "substeps": []
        },
        {
            "step_id": "22",
            "reaction_type": "Nucleophilic Addition / Organometallic Addition",
            "reagents": "",
            "reagent_smiles": "C=C[Li]",
            "conditions": "",
            "yield": "",
            "reactant_smiles": "CC1=CC2CC3=C(C=CC(=N3)OC)C(C1)(C2=O)NC(=O)OC",
            "product_smiles": "COC1=NC=CC2=C1CC3C=C(C)C4(C3)C2N(C(=O)OC)C4(C=C)O",
            "notes": "Addition of vinyl lithium to a ketone, forming an alcohol.",
            "substeps": []
        },
        {
            "step_id": "23",
            "reaction_type": "Allylic chlorination / SNi' reaction",
            "reagents": "SOCl₂",
            "reagent_smiles": "ClS(=O)Cl",
            "conditions": "CH₂Cl₂",
            "yield": "",
            "reactant_smiles": "COc1ccc2n1C3(C(O)(NC(=O)OC)C=C)C[C@H]4C=C(C)CC[C@@H]5[C@@H]2354",
            "product_smiles": "COc1ccc2n1C3(C[C@H]4C=C(C)CC[C@@H]5[C@@H]2354)[C@H](NC(=O)OC)/C=C/CCl",
            "notes": "Conversion of an allylic alcohol to an allylic chloride with rearrangement of the double bond. The vinyl group (C=CH2) is transformed into an E-chloropropenyl group (-CH=CH-CH2Cl) via rearrangement.",
            "substeps": []
        },
        {
            "step_id": "24",
            "reaction_type": "Reduction",
            "reagents": "LiBHEt3",
            "reagent_smiles": "",
            "conditions": "",
            "yield": "46% (3 steps)",
            "reactant_smiles": "CC1=CC/2CC3=C(C=CC(=N3)OC)C(C1)(/C2=C\\CCl)NC(=O)OC",
            "product_smiles": "CC1=CC/2CC3=C(C=CC(=N3)OC)C(C1)(/C2=C\\C)NC(=O)OC",
            "notes": "E-alkene chloromethyl group reduced to E-alkene methyl group.",
            "substeps": []
        },
        {
            "step_id": "25",
            "reaction_type": "Deprotection / Demethylation",
            "reagents": "TMSI, CHCl3, MeOH",
            "reagent_smiles": "",
            "conditions": "reflux",
            "yield": "",
            "reactant_smiles": "COC(=O)NC1(C2C=C(C)CC1C3=C2N=C(C=C3)OC)",
            "product_smiles": "CC(=C1)CCC2C3C1(N)C4=C2NC(=O)C=C4",
            "notes": "Deprotection of carbamate to primary amine, and conversion of methoxy-pyridine to a pyridone (lactam).",
            "substeps": []
        }
    ]
}