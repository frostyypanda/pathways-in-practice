{
    "$schema": "../schema.json",
    "meta": {
        "id": "rapamycin-schreiber-1993",
        "molecule_name": "Rapamycin",
        "class": "Natural Product",
        "author": "Schreiber",
        "year": 1993
    },
    "sequence": [
        {
            "step_id": "1",
            "reaction_type": "Alcohol Protection (THP ether formation)",
            "reagents": "H+",
            "reagent_smiles": "C1CCOC=C1",
            "conditions": "",
            "yield": "",
            "reactant_smiles": "C[C@H](CO)C(=O)OC",
            "product_smiles": "C[C@H](CO[THP])C(=O)OC",
            "notes": "Protection of a primary alcohol as a tetrahydropyranyl (THP) ether.",
            "substeps": []
        },
        {
            "step_id": "2",
            "reaction_type": "Reduction",
            "reagents": "LiAlH4",
            "reagent_smiles": "",
            "conditions": "",
            "yield": "",
            "reactant_smiles": "C[C@H](C[THPO])C(=O)OC",
            "product_smiles": "C[C@H](CO)C[THPO]",
            "notes": "Ester reduction to primary alcohol using lithium aluminum hydride, with a THP protecting group maintained.",
            "substeps": []
        },
        {
            "step_id": "3",
            "reaction_type": "Williamson Ether Synthesis",
            "reagents": "NaH, PMBBr",
            "reagent_smiles": "",
            "conditions": "",
            "yield": "",
            "reactant_smiles": "[THPO]C[C@H](C)CO",
            "product_smiles": "[THPO]C[C@H](C)CO[PMB]",
            "notes": "Protection of a primary alcohol as a p-methoxybenzyl (PMB) ether.",
            "substeps": []
        },
        {
            "step_id": "4",
            "reaction_type": "Deprotection",
            "reagents": "MeOH, H+",
            "reagent_smiles": "",
            "conditions": "",
            "yield": "73%",
            "reactant_smiles": "C[C@@H](C[OPMB])(C[OTHP])",
            "product_smiles": "C[C@@H](CO)(C[OPMB])",
            "notes": "Acid-catalyzed deprotection of THP ether to primary alcohol over 4 steps.",
            "substeps": []
        },
        {
            "step_id": "5",
            "reaction_type": "Bromination (Mitsunobu-like)",
            "reagents": "PPh3, NBS",
            "reagent_smiles": "P(c1ccccc1)(c2ccccc2)c3ccccc3.O=C1N(Br)CCC1=O",
            "conditions": "",
            "yield": "93%",
            "reactant_smiles": "C[C@H](CO)O[PMB]",
            "product_smiles": "C[C@H](CBr)O[PMB]",
            "notes": "A primary alcohol is converted to an alkyl bromide with retention of stereochemistry at the adjacent chiral center.",
            "substeps": []
        },
        {
            "step_id": "6",
            "reaction_type": "Weiler alkylation",
            "reagents": "NaH, n-BuLi, HMPA",
            "reagent_smiles": "COC(=O)CC(=O)C",
            "conditions": "",
            "yield": "90%",
            "reactant_smiles": "C[C@H](CBr)CO[PMB]",
            "product_smiles": "C[C@H](CCC(=O)CC(=O)OC)CO[PMB]",
            "notes": "Weiler alkylation of an alkyl bromide with methyl acetoacetate, forming a beta-keto ester.",
            "substeps": []
        },
        {
            "step_id": "7",
            "reaction_type": "Noyori asymmetric reduction",
            "reagents": "RuCl2[(S)-binap]Et3N",
            "reagent_smiles": "",
            "conditions": "H2, 1100 psi",
            "yield": "88%",
            "reactant_smiles": "C[C@H](CCC(=O)CC(=O)OC)CH2O[PMB]",
            "product_smiles": "C[C@H](CC[C@@H](CC(=O)OC)O)CH2O[PMB]",
            "notes": "Asymmetric reduction of a ketone to a secondary alcohol.",
            "substeps": []
        },
        {
            "step_id": "8",
            "reaction_type": "Weinreb Amide Synthesis",
            "reagents": "Me3Al",
            "reagent_smiles": "CNOC.[Al](C)(C)C",
            "conditions": "",
            "yield": "97%",
            "reactant_smiles": "C[C@H](CC[C@@H](CC(=O)OC)O)[OPMB]",
            "product_smiles": "C[C@H](CC[C@@H](CC(=O)N(C)OC)O)[OPMB]",
            "notes": "Methyl ester converted to Weinreb amide using N-methyl-O-methylhydroxylamine and trimethylaluminum.",
            "substeps": []
        },
        {
            "step_id": "9",
            "reaction_type": "Weinreb Amide Addition / Ketone Formation",
            "reagents": "n-BuLi, t-BuLi",
            "reagent_smiles": "BrC(C)=C\\CO[TBS]",
            "conditions": "-90°",
            "yield": "",
            "reactant_smiles": "C[C@H](CC[C@@H](CC(=O)N(C)OC)O)O[PMB]",
            "product_smiles": "C[C@H](CC[C@@H](CC(=O)C(C)=C/CO[TBS])O)O[PMB]",
            "notes": "Weinreb amide reacts with an allylic organolithium (formed in situ from the allylic bromide) to form an alpha,beta-unsaturated ketone. The alkene stereochemistry changes from E in the allylic bromide reagent to Z in the product ketone.",
            "substeps": []
        },
        {
            "step_id": "10",
            "reaction_type": "Deprotection",
            "reagents": "DDQ",
            "reagent_smiles": "",
            "conditions": "",
            "yield": "93%",
            "reactant_smiles": "[TBS]OC/C=C(\\C)/C(=O)C[C@H](CC[C@@H](C)C[PMB]O)O",
            "product_smiles": "[TBS]OC/C=C(\\C)/C(=O)C[C@H](CC[C@@H](C)CO)O",
            "notes": "Cleavage of p-methoxybenzyl (PMB) ether to a primary alcohol.",
            "substeps": []
        },
        {
            "step_id": "11",
            "reaction_type": "Ketone Reduction (Stereoselective)",
            "reagents": "Et2BOMe, NaBH4",
            "reagent_smiles": "",
            "conditions": "-78°",
            "yield": "98%",
            "reactant_smiles": "[OTBS]C/C=C(\\C)/C(=O)C[C@H](O)CC[C@@H](C)CO",
            "product_smiles": "[OTBS]C/C=C(\\C)/[C@H](O)C[C@H](O)CC[C@@H](C)CO",
            "notes": "Stereoselective reduction of a ketone to a secondary alcohol.",
            "substeps": []
        },
        {
            "step_id": "12",
            "reaction_type": "Intramolecular Etherification / Cyclization",
            "reagents": "RuCl2(PPh3)3",
            "reagent_smiles": "",
            "conditions": "",
            "yield": "",
            "reactant_smiles": "[TBS]OC/C=C(\\C)/[C@H](C[C@H](CC[C@@H](C)CO)O)O",
            "product_smiles": "[TBS]OC/C=C(\\C)/[C@H](C[C@@H]1CC[C@@H](C)[C@H](O)O1)O",
            "notes": "Formation of a 6-membered tetrahydropyran ring from two hydroxyl groups.",
            "substeps": []
        },
        {
            "step_id": "13",
            "reaction_type": "Methylation (Williamson Ether Synthesis)",
            "reagents": "NaH, MeI",
            "reagent_smiles": "[NaH].CI",
            "conditions": "",
            "yield": "78% (2 steps)",
            "reactant_smiles": "[TBS]OC/C=C(\\C)/[C@@H](O)C[C@H]1OC[C@@H](O)CC[C@H](C)C1",
            "product_smiles": "[TBS]OC/C=C(\\C)/[C@@H](OC)C[C@H]1OC[C@@H](OC)CC[C@H](C)C1",
            "notes": "Two hydroxyl groups are methylated to methoxy groups via a base-mediated reaction with iodomethane.",
            "substeps": []
        },
        {
            "step_id": "14",
            "reaction_type": "Acetal cleavage and thioacetal formation",
            "reagents": "TiCl4",
            "reagent_smiles": "SCCS.Cl[Ti](Cl)(Cl)Cl",
            "conditions": "-78 °C",
            "yield": "60%",
            "reactant_smiles": "C/C(=C\\CO[TBS])/[C@@H](C[C@@H]1CC[C@@H](C)[C@@H](OC)O1)OC",
            "product_smiles": "C/C(=C\\CO[TBS])/[C@@H](C[C@@H](CC[C@@H](C)[C@H]1SCCS1)O)OC",
            "notes": "The internal acetal of the tetrahydropyran ring is cleaved. One methoxy group is hydrolyzed to a hydroxyl group, while the other is converted to a 1,3-dithiolane via reaction with ethane-1,2-dithiol. The TBS ether and alkene moieties remain unchanged.",
            "substeps": []
        },
        {
            "step_id": "15",
            "reaction_type": "Alcohol Protection (Silylation)",
            "reagents": "TBSOTf, 2,6-lutidine",
            "reagent_smiles": "",
            "conditions": "",
            "yield": "94%",
            "reactant_smiles": "[OTBS]C/C=C(\\C)/[C@H](C[C@H](CC[C@@H](C)C1SCCS1)O)OC",
            "product_smiles": "[OTBS]C/C=C(\\C)/[C@H](C[C@H](CC[C@@H](C)C1SCCS1)[OTBS])OC",
            "notes": "Secondary alcohol is protected as a TBS ether.",
            "substeps": []
        },
        {
            "step_id": "17",
            "reaction_type": "Dithioacetal deprotection / Acetal formation",
            "reagents": "Phil(OCOCF3)2",
            "reagent_smiles": "",
            "conditions": "MeOH",
            "yield": "73%",
            "reactant_smiles": "[TBS]O[C@@H](CC[C@@H](C)C1SCCS1)C[C@@H](/C(=C/CO)/C)OC",
            "product_smiles": "[TBS]O[C@@H](CC[C@@H](C)C(OC)OC)C[C@@H](/C(=C/CO)/C)OC",
            "notes": "Deprotection of a 1,3-dithiolane to a dimethyl acetal using phenyliodonium bis(trifluoroacetate) and methanol.",
            "substeps": []
        },
        {
            "step_id": "18",
            "reaction_type": "Oxidation",
            "reagents": "BaMnO4, celite",
            "reagent_smiles": "",
            "conditions": "",
            "yield": "",
            "reactant_smiles": "C(OC)OC[C@H](C)CC[C@@H]([OTBS])CC[C@H](OC)C/C=C(/C)CO",
            "product_smiles": "C(OC)OC[C@H](C)CC[C@@H]([OTBS])CC[C@H](OC)C/C=C(/C)C=O",
            "notes": "Primary alcohol oxidized to an alpha,beta-unsaturated aldehyde.",
            "substeps": []
        },
        {
            "step_id": "19",
            "reaction_type": "Wittig olefination",
            "reagents": "Ph3P=CHCO2Et",
            "reagent_smiles": "CCOC(=O)C=[P](c1ccccc1)(c1ccccc1)c1ccccc1",
            "conditions": "",
            "yield": "77% (2 steps)",
            "reactant_smiles": "C[C@H](CC[C@H](C[C@@H](/C(=C/C=O)/C)OC)[OTBS])C(OC)OC",
            "product_smiles": "CCOC(=O)/C=C/C=C(\\C)/[C@H](C[C@@H](CC[C@H](C)C(OC)OC)[OTBS])OC",
            "notes": "Wittig reaction of an aldehyde to form an alpha,beta-unsaturated ethyl ester and extend the carbon chain.",
            "substeps": []
        },
        {
            "step_id": "20",
            "reaction_type": "Reduction",
            "reagents": "DIBALH",
            "reagent_smiles": "",
            "conditions": "",
            "yield": "83%",
            "reactant_smiles": "CCOC(=O)/C=C/C=C(\\C)/[C@H](OC)C[C@@H]([OTBS])CC[C@H](C)C(OC)OC",
            "product_smiles": "OC/C=C/C=C(\\C)/[C@H](OC)C[C@@H]([OTBS])CC[C@H](C)C(OC)OC",
            "notes": "Ester is reduced to a primary alcohol using DIBALH. All other functional groups and stereocenters are retained.",
            "substeps": []
        },
        {
            "step_id": "21",
            "reaction_type": "Halogenation (Appel-type reaction)",
            "reagents": "hexachloroacetone, PPh3, 2,6-Di-t-butylpyridine",
            "reagent_smiles": "",
            "conditions": "",
            "yield": "",
            "reactant_smiles": "C/C(=C\\C=C\\CO)/[C@H](C[C@H](CC[C@@H](C)C(OC)OC)[OTBS])OC",
            "product_smiles": "ClC/C=C/C=C(C)/[C@H](C[C@H](CC[C@@H](C)C(OC)OC)[OTBS])OC",
            "notes": "Conversion of a primary alcohol to a primary alkyl chloride. All stereocenters and double bond configurations are retained.",
            "substeps": []
        },
        {
            "step_id": "22",
            "reaction_type": "Substitution and Oxidation",
            "reagents": "LiPPh2",
            "reagent_smiles": "[Li]P([Ph])[Ph]",
            "conditions": "",
            "yield": "65%",
            "reactant_smiles": "Cl/C=C/C=C(C)/[C@@H](OC)[C@@H](O[TBS])CCC[C@@H](C)C(OC)OC",
            "product_smiles": "O=P([Ph])([Ph])C/C=C/C=C(C)/[C@@H](OC)[C@@H](O[TBS])CCC[C@@H](C)C(OC)OC",
            "notes": "Terminal chloride is replaced by diphenylphosphine oxide via reaction with LiPPh2 followed by oxidation (implied by the P=O in product).",
            "substeps": []
        },
        {
            "step_id": "24",
            "reaction_type": "None (No visible chemical change)",
            "reagents": "PPTS",
            "reagent_smiles": "",
            "conditions": "acetone, 43°C",
            "yield": "56%",
            "reactant_smiles": "O=C1[C@@H](C)[C@@H](C)[C@H](C)[C@@H](C[C@@H]2CC[C@H](OC)[C@@H](O[TIPS])C2)C[C@H](O[ALLOC])C[C@H](O[DEIPS])C[C@H](O[ALLOC])C[C@H]([C@@H](C)C(=O)O[C@@H]([C@@H]3CCCCN3[Boc]))/C=C/C=C/C=C(\\C)[C@H](OMe)C[C@@H](O[TBS])[C@@H](C)[C@@H](C)O[C@@H](C)OMe1",
            "product_smiles": "O=C1[C@@H](C)[C@@H](C)[C@H](C)[C@@H](C[C@@H]2CC[C@H](OC)[C@@H](O[TIPS])C2)C[C@H](O[ALLOC])C[C@H](O[DEIPS])C[C@H](O[ALLOC])C[C@H]([C@@H](C)C(=O)O[C@@H]([C@@H]3CCCCN3[Boc]))/C=C/C=C/C=C(\\C)[C@H](OMe)C[C@@H](O[TBS])[C@@H](C)[C@@H](C)O[C@@H](C)OMe1",
            "notes": "Reactant and product structures are visually identical in the screenshot. All protecting groups are retained, and the core macrolactone structure is unchanged. PPTS (Pyridinium p-toluenesulfonate) is a mild acid catalyst, but no acid-catalyzed transformation is apparent.",
            "substeps": []
        },
        {
            "step_id": "25",
            "reaction_type": "Aldol-type Addition / Esterification",
            "reagents": "AllocCl, 2,6-lut.",
            "reagent_smiles": "[Li]OC(=C)OC(C)OCC",
            "conditions": "THF, -78°C",
            "yield": "",
            "reactant_smiles": "CC(=O)[C@H](C)CC[C@H](C)[C@@H]([OTBS])[C@H]([OMe])/C=C(\\C)/C=C/C=C(\\C)/C=C/[C@@H]([C@H](C)[C@H]([ODEIPS])[C@H](C)[C@@H]([AllocO])C[C@@H]([C@H]([OMe])[C@H](C)[C@@H]([AllocO])C[C@@H]([C@H]([OMe])[C@@H](C)C1CC[C@H]([C@@H](C1)[OMe])[OTIPS])OC(=O)[C@H](C)[N]([Boc])C2CCCCC2",
            "product_smiles": "[AllocO]C(=O)C[C@@H](C)[C@H](C)CC[C@H](C)[C@@H]([OTBS])[C@H]([OMe])/C=C(\\C)/C=C/C=C(\\C)/C=C/[C@@H]([C@H](C)[C@H]([ODEIPS])[C@H](C)[C@@H]([AllocO])C[C@@H]([C@H]([OMe])[C@H](C)[C@@H]([AllocO])C[C@@H]([C@H]([OMe])[C@@H](C)C1CC[C@H]([C@@H](C1)[OMe])[OTIPS])OC(=O)[C@H](C)[N]([Boc])C2CCCCC2",
            "notes": "Methyl ketone is converted to an alloc ester via carbon-carbon bond formation with a lithium enolate, followed by functional group manipulation.",
            "substeps": []
        },
        {
            "step_id": "27",
            "reaction_type": "Macrocyclization",
            "reagents": "",
            "reagent_smiles": "[N+]1(C)C=CC=C1.[Cl-].CCN(CC)CC",
            "conditions": "",
            "yield": "40%",
            "reactant_smiles": "O=C(O)C[C@@H](C)CC[C@H]([OTBS])C[C@H]([OMe])/C=C/C=C(/C)[C@@H]([OAlloc])C[C@H]([OMe])[C@@H]([ODEIPS])/C=C/C=C(/C)[C@@H](C)[C@H]([OAlloc])C(=O)N1[C@H](C)CCCC1[C@H](C)C[C@H]([OMe])C[C@H]([OTIPS])C",
            "product_smiles": "O=C1O[C@H]([OAlloc])[C@@H](C)C(=O)N2[C@H](C)CCCC2[C@H](C)C[C@H]([OMe])C[C@H]([OTIPS])C/C=C/C=C(/C)[C@@H]([ODEIPS])C[C@H]([OMe])[C@@H]([OAlloc])/C=C/C=C(/C)[C@H]([OMe])C[C@H]([OAlloc])CC[C@@H](C)C1",
            "notes": "Macrolactonization through an ester linkage. The OTBS protecting group is replaced by OAlloc, implying a deprotection/re-protection sequence, or a multi-step transformation. The reaction proceeds over 3 steps.",
            "substeps": []
        },
        {
            "step_id": "28",
            "reaction_type": "Allyl Deprotection",
            "reagents": "Pd(Ph3P)4, HCO2NH4",
            "reagent_smiles": "",
            "conditions": "",
            "yield": "",
            "reactant_smiles": "C[C@@H]1C[C@H](C)[C@@H](C[C@@H]([OTBS])[C@H](C)[C@@H]([OMe])[C@H](C)[C@@H](/C=C/C=C/C=C(\\C)[C@@H](C[C@@H]([OMe])[C@@H]([ODEIPS])[C@@H]([OAlloc])[C@@H]([OMe])[C@@H](C)[C@@H]([OAlloc])C[C@@H](C)[C@@H](CC[C@@H]([OTIPS])[C@H]([OMe])C[C@H]2CC[C@@H](C)[C@@H]([C@@H](C)C[C@@H](CC(=O)N3CCCC[C@@]3(C)C(=O)O1)O)O2)C)OC",
            "product_smiles": "C[C@@H]1C[C@H](C)[C@@H](C[C@@H]([OTBS])[C@H](C)[C@@H]([OMe])[C@H](C)[C@@H](/C=C/C=C/C=C(\\C)[C@@H](C[C@@H]([OMe])[C@@H]([ODEIPS])[C@@H](O)[C@@H]([OMe])[C@@H](C)[C@@H](O)C[C@@H](C)[C@@H](CC[C@@H]([OTIPS])[C@H]([OMe])C[C@H]2CC[C@@H](C)[C@@H]([C@@H](C)C[C@@H](CC(=O)N3CCCC[C@@]3(C)C(=O)O1)O)O2)C)OC",
            "notes": "Two allyl carbonate (Alloc) protecting groups are removed, revealing two hydroxyl groups.",
            "substeps": []
        },
        {
            "step_id": "29",
            "reaction_type": "Oxidation (Dess-Martin oxidation)",
            "reagents": "DMP",
            "reagent_smiles": "",
            "conditions": "",
            "yield": "",
            "reactant_smiles": "C[C@H]1CCC[C@@H](C)O[C@H](C/C=C/C=C/C=C(\\C)[C@H](C)C(=O)[C@H](C)[C@@H](OC(=O)[C@]2(C)CCCCN2C(=O)C[C@@H]([OMe])[C@@H]([OTIPS])[C@H](C)CC[C@H](O)[C@H](C)C)[C@H]([OMe])[C@H](O)[C@@H](O[Si](CC)(CC)C(C)C)[C@H](C)CC[C@H]([OTBS])[C@H](O)C)C1",
            "product_smiles": "C[C@H]1CCC[C@@H](C)O[C@H](C/C=C/C=C/C=C(\\C)[C@H](C)C(=O)[C@H](C)[C@@H](OC(=O)[C@]2(C)CCCCN2C(=O)C[C@@H]([OMe])[C@@H]([OTIPS])[C@H](C)CC[C@H](=O)[C@H](C)C)[C@H]([OMe])[C@H](=O)[C@@H](O[Si](CC)(CC)C(C)C)[C@H](C)CC[C@H]([OTBS])[C@H](=O)C)C1",
            "notes": "Four secondary alcohol groups are oxidized to ketones using Dess-Martin Periodinane (DMP).",
            "substeps": []
        }
    ]
}