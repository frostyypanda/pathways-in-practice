{
    "$schema": "../schema.json",
    "meta": {
        "id": "kopsine-qin-2017",
        "molecule_name": "Kopsine",
        "class": "Natural Product",
        "author": "Qin",
        "year": 2017
    },
    "sequence": [
        {
            "step_id": "1",
            "reaction_type": "N-Protection",
            "reagents": "Boc₂O, DMAP",
            "reagent_smiles": "",
            "conditions": "CH₂Cl₂",
            "yield": "99%",
            "reactant_smiles": "C1=CC2=C(C=C1)NC3=C2C(=O)CCC3",
            "product_smiles": "[Boc]N1C2=C(C=CC=C2)C3=C1CCCC3=O",
            "notes": "N-protection of a carbazole nitrogen with Boc anhydride",
            "substeps": []
        },
        {
            "step_id": "2",
            "reaction_type": "Enolate Acylation",
            "reagents": "",
            "reagent_smiles": "[Li+]N([Si](C)(C)C)[Si](C)(C)C.C=CCOC(=O)Cl",
            "conditions": "THF, -78 to 0 °C",
            "yield": "83%",
            "reactant_smiles": "[Boc]N1C2=C(C=CC=C2)C3=C1CCCC3=O",
            "product_smiles": "C=CCOC(=O)C1CCC2=C(C3=C(C=CC=C3)N2[Boc])C1=O",
            "notes": "Alpha-acylation of ketone enolate with allyl chloroformate.",
            "substeps": []
        },
        {
            "step_id": "3",
            "reaction_type": "Alkylation",
            "reagents": "K2CO3",
            "reagent_smiles": "BrC1=CC(CBr)=NO1",
            "conditions": "acetone, reflux",
            "yield": "86%",
            "reactant_smiles": "C=CCOC(=O)C1CCC2=C(C3=C(C=CC=C3)N2[Boc])C1=O",
            "product_smiles": "C=CCOC(=O)C1(CCC2=C(C3=C(C=CC=C3)N2[Boc])C1=O)CC4=CC(=NO4)Br",
            "notes": "Alpha-alkylation of a beta-keto ester with a bromomethylisoxazole derivative.",
            "substeps": []
        },
        {
            "step_id": "4",
            "reaction_type": "Allylic Alkylation / Decarboxylative Alkylation",
            "reagents": "Pd2(dba)3",
            "reagent_smiles": "CC(C)(C)[C@H]1COC(=N1)C2=CC=CC=C2[PPh2]",
            "conditions": "PhMe, reflux",
            "yield": "91%",
            "reactant_smiles": "C=CCOC(=O)C1(CCC2=C(C3=C(C=CC=C3)N2[Boc])C1=O)CC1=NOC=C(Br)1",
            "product_smiles": "C=CC[C@]1(CCC2=C(C3=C(C=CC=C3)N2[Boc])C1=O)CC1=NOC=C(Br)1",
            "notes": "Decarboxylative allylic alkylation of an allyl ester, forming a new chiral center with specific stereochemistry.",
            "substeps": []
        },
        {
            "step_id": "5",
            "reaction_type": "Hydroboration-oxidation",
            "reagents": "catecholborane, [RhCl(PPh3)3], NaBO3.H2O",
            "reagent_smiles": "",
            "conditions": "THF, H2O, 85 °C",
            "yield": "92%",
            "reactant_smiles": "C=CC[C@@]1(CCC2=C(C3=C(C=CC=C3)N2[Boc])C1=O)CC4=CC(=NO4)Br",
            "product_smiles": "[Boc]N1C2=C(C=CC=C2)C3=C1CC[C@@](CCCO)(CC4=CC(=NO4)Br)C3=O",
            "notes": "Catalytic hydroboration-oxidation of an alkene to a primary alcohol. The Boc protecting group remains intact.",
            "substeps": []
        },
        {
            "step_id": "6",
            "reaction_type": "Mesylation",
            "reagents": "MsCl, Et3N",
            "reagent_smiles": "",
            "conditions": "CH2Cl2, 0 °C",
            "yield": "",
            "reactant_smiles": "[Boc]N1C2=C(C=CC=C2)C3=C1CC[C@](CCCO)(CC4=CC(=NO4)Br)C3=O",
            "product_smiles": "[Boc]N1C2=C(C=CC=C2)C3=C1CC[C@](CCC[OMs])(CC4=CC(=NO4)Br)C3=O",
            "notes": "Conversion of a primary alcohol to a mesylate leaving group.",
            "substeps": []
        },
        {
            "step_id": "7",
            "reaction_type": "SN2 Azide Substitution",
            "reagents": "NaN3",
            "reagent_smiles": "",
            "conditions": "DMF, 60 °C",
            "yield": "95% (2 steps)",
            "reactant_smiles": "CC(C)(C)OC(=O)N1C2=C(C=CC=C2)C3=C1CC[C@](CCCOS(=O)(=O)C)(Cc1noc(Br)c1)C3=O",
            "product_smiles": "CC(C)(C)OC(=O)N1C2=C(C=CC=C2)C3=C1CC[C@](CCC[N3])(Cc1noc(Br)c1)C3=O",
            "notes": "Mesylate converted to azide via SN2 substitution. The stereocenter remains unchanged.",
            "substeps": []
        },
        {
            "step_id": "8",
            "reaction_type": "Staudinger reaction",
            "reagents": "THF, H2O",
            "reagent_smiles": "P(c1ccccc1)(c2ccccc2)c3ccccc3",
            "conditions": "reflux",
            "yield": "91%",
            "reactant_smiles": "CC(C)(C)OC(=O)N1c2cccc3c2c1C(=O)C[C@@](CC[N+]#N)(CC4=COC(=N4)Br)C3",
            "product_smiles": "CC(C)(C)OC(=O)N1C2=C(C=CC=C2)C3=C1CC[C@]4(CCCN=C34)CC5=CC(=NO5)Br",
            "notes": "Intramolecular Staudinger reaction of an azide and ketone to form a fused imine.",
            "substeps": []
        },
        {
            "step_id": "9",
            "reaction_type": "Imine Reduction",
            "reagents": "",
            "reagent_smiles": "[NaH4B]",
            "conditions": "EtOH, THF",
            "yield": "85%",
            "reactant_smiles": "CC(C)(C)OC(=O)N1C2=C(C=CC=C2)C3=C1CC[C@]4(CCCN=C34)CC5=CC(=NO5)Br",
            "product_smiles": "CC(C)(C)OC(=O)N1C2=C(C=CC=C2)C3=C1C[C@@H][C@]4(CCCN[C@H]34)CC5=CC(=NO5)Br",
            "notes": "Imine is reduced to a secondary amine using sodium borohydride, forming two new chiral centers with defined stereochemistry (wedge and dash), in addition to the existing spiro center.",
            "substeps": []
        },
        {
            "step_id": "10",
            "reaction_type": "Amine Protection",
            "reagents": "Na2CO3",
            "reagent_smiles": "ClC(Cl)(Cl)CCOC(=O)Cl",
            "conditions": "CH2Cl2, H2O",
            "yield": "94%",
            "reactant_smiles": "[Boc]N1C2=C(C=CC=C2)C3=C1CC[C@]4(CCCN[C@H]34)CC5=CC(=NO5)Br",
            "product_smiles": "[Boc]N1C2=C(C=CC=C2)C3=C1CC[C@]4(CCCN([C@H]34)[Troc])CC5=CC(=NO5)Br",
            "notes": "Secondary amine protected with 2,2,2-trichloroethoxycarbonyl (Troc) group.",
            "substeps": []
        },
        {
            "step_id": "11",
            "reaction_type": "Bromoisoxazole ring opening and fragmentation",
            "reagents": "FeCl3",
            "reagent_smiles": "",
            "conditions": "MeCN, reflux",
            "yield": "",
            "reactant_smiles": "[Boc]N1C2=C(C=CC=C2)C3=C1CC[C@]4(CCCN([C@H]34)C(=O)OCC(Cl)(Cl)Cl)CC5=CC(=NO5)Br",
            "product_smiles": "[Boc]N1C2=C(C=CC=C2)C3=C1CC[C@]4(CCCN([C@H]34)C(=O)OCC(Cl)(Cl)Cl)CC(=O)CC#N",
            "notes": "Iron(III)-catalyzed ring opening of a bromoisoxazole to form a β-ketonitrile.",
            "substeps": []
        },
        {
            "step_id": "12",
            "reaction_type": "Regitz diazotransfer",
            "reagents": "pyridine",
            "reagent_smiles": "O=S(N1C=CN=C1)(=O)N=[N+]=[N-]",
            "conditions": "",
            "yield": "91% (2 steps)",
            "reactant_smiles": "[Boc]N1C2=C(C=CC=C2)C3=C1CC[C@]4(CCCN([C@H]34)[Troc])CC(=O)CC#N",
            "product_smiles": "[Boc]N1C2=C(C=CC=C2)C3=C1CC[C@]4(CCCN([C@H]34)[Troc])CC(=O)C(=[N+]=[N-])C#N",
            "notes": "Diazotransfer reaction transforming an active methylene into a diazo group.",
            "substeps": []
        },
        {
            "step_id": "13",
            "reaction_type": "Intramolecular Cyclopropanation and Cyclization",
            "reagents": "Cu(hfacac)2",
            "reagent_smiles": "",
            "conditions": "PhCl, 120 °C",
            "yield": "52%",
            "reactant_smiles": "[Boc]N1C2=C(C=CC=C2)C=C1[C@H]3CC[C@@]4(C[C@H](N([Troc])CCC4)[C@H]3)CC(=O)C(=[N+]=[N-])C#N",
            "product_smiles": "[Boc]N1C2=C(C=CC=C2)[C@]34[C@H]1[C@]5(C#N)[C@@]6(C(=O)C[C@@H]([C@H]7CC[C@H](N([Troc])CCC7)[C@@H]6)C5)C3",
            "notes": "Copper(II) hexafluoroacetylacetonate catalyzed intramolecular cyclopropanation of the diazo group with the indole C2-C3 alkene, followed by cascade cyclization involving the nitrile and ketone to form a complex caged product.",
            "substeps": []
        },
        {
            "step_id": "14",
            "reaction_type": "Reductive Deprotection / Cascade Cyclization",
            "reagents": "Zn, AcOH",
            "reagent_smiles": "",
            "conditions": "EtOH, THF",
            "yield": "",
            "reactant_smiles": "[Troc]N1CCC[C@]23CC[C@@]45[C@@](C2)(C6=C(C=CC=C6)[Boc]N4)[C@@]31C#N",
            "product_smiles": "CCO[C@@]12CC[C@]34CCCN[C@]3([C@@]2(CC#N)C5=C(C=CC=C5)N1[Boc]])OC4=O",
            "notes": "Reductive deprotection of the Troc group (zinc-mediated) is followed by an intramolecular cyclization cascade involving the newly formed amine, the ketone, and ethanol. This sequence forms a lactone ring and an ethyl hemiaminal ether. The stereochemistry of the nitrile-bearing carbon is depicted as wavy in the product.",
            "substeps": []
        },
        {
            "step_id": "15",
            "reaction_type": "Mannich reaction",
            "reagents": "",
            "reagent_smiles": "O=C",
            "conditions": "EtOH, reflux",
            "yield": "55% (2 steps)",
            "reactant_smiles": "CCO[C@]12C[C@@]34C[C@H]5N[C@@H]6C(=O)C[C]2(C#N)C7=C(C=CC=C7)N([Boc])C1C[C@@]36O45",
            "product_smiles": "CCO[C@]12CCC34C[C@@H]5N([Boc])C6=C(C=CC=C6)[C@]2([C@H](C#N)C[C@H]7C(=O)NC[C@@H]3[C@H]7C1)OC45",
            "notes": "Intramolecular Mannich reaction where formaldehyde bridges the secondary amine and the alpha-carbon of the ketone to form a lactam ring.",
            "substeps": []
        },
        {
            "step_id": "16",
            "reaction_type": "Boc Deprotection, Elimination, and Hydrolysis",
            "reagents": "TFA",
            "reagent_smiles": "",
            "conditions": "CH2Cl2, 0 °C to r.t.",
            "yield": "",
            "reactant_smiles": "CCO[C@H]1CC[C@H]2N3CC[C@@]45C(=O)N2[C@H]4[C@H](C#N)C6=CC=CC=C6N([Boc])C15",
            "product_smiles": "N1([H])C2=C(C=CC=C2)C3=N[C@@H]4C[C@@H]5CC[C@@]67C(=O)N4[C@H]6[C@@H](C#N)C157.OC1CC[C@H]2N3CC[C@@]45C(=O)N2[C@H]4[C@H](C#N)C6=CC=CC=C6N([H])C15",
            "notes": "Boc deprotection of the indole nitrogen, followed by elimination of the ethoxy group to form an imine, and hydrolysis of the ethoxy group to an alcohol (mixture of stereoisomers for the alcohol product).",
            "substeps": []
        },
        {
            "step_id": "17",
            "reaction_type": "Cyanation / Amine Formation / Amide Formation",
            "reagents": "TMSCN, AlCl3",
            "reagent_smiles": "C[Si](C)(C)C#N.Cl[Al](Cl)Cl",
            "conditions": "CH2Cl2",
            "yield": "74% (2 steps)",
            "reactant_smiles": "C#N[C@]1(C(=O)N2C[C@H]3[C@@H]4CCC([C@H]3)N4C2C1)c5cccc6c5N=C1.C#N[C@@]1(O)(c2cccc3c2NC1)[C@@H]4C[C@H]5[C@@H]6CCC([C@H]5)N6C4",
            "product_smiles": "C#N[C@@]1(c2cccc3c2N[C@@]1)[C@@H]4[C@H](C#N)C(=O)N5C[C@@H]6[C@H]7CCC([C@@H]6)N7C5C4",
            "notes": "Transformation involves the reaction of two complex polycyclic indole-like precursors to form a new complex polycyclic product. One nitrile group replaces a hydroxyl group, and a new amide and another nitrile group are formed, along with changes in ring unsaturation and stereochemistry.",
            "substeps": []
        },
        {
            "step_id": "18",
            "reaction_type": "Reductive cyclization / Pinacol coupling",
            "reagents": "SmI2",
            "reagent_smiles": "[Sm]",
            "conditions": "THF",
            "yield": "74%",
            "reactant_smiles": "C1=CC2=C(C=C1)N[C@]3(C#N)C(C[C@]45CCCN6C[C@H](C#N)C(=O)[C@]42[C@H]356)",
            "product_smiles": "C1=CC2=C(C=C1)N[C@]34CC[C@@]56CCCN7CC(C#N)([C@@H]53)C(O)([C@H]6)C4=O",
            "notes": "Samarium diiodide-mediated reductive cyclization of a dinitrile lactam to form a complex polycyclic structure with a new hydroxyl group and an opened lactam ketone.",
            "substeps": []
        },
        {
            "step_id": "19",
            "reaction_type": "Nitrile hydrolysis",
            "reagents": "HCl",
            "reagent_smiles": "",
            "conditions": "100 °C",
            "yield": "81%",
            "reactant_smiles": "O=C1O[C@H]2[C@@H](CC1)[C@]34CC[C@@H]5N(CC[C@H]6C[C@H]7C3=C(C=CC=C7)[NH]C6)C(C#N)(O)[C@@]45",
            "product_smiles": "O=C1O[C@H]2[C@@H](CC1)[C@]34CC[C@@H]5N(CC[C@H]6C[C@H]7C3=C(C=CC=C7)[NH]C6)C(C(=O)O)(O)[C@@]45",
            "notes": "Hydrolysis of a nitrile to a carboxylic acid under acidic conditions.",
            "substeps": []
        },
        {
            "step_id": "20",
            "reaction_type": "Esterification (activated ester formation)",
            "reagents": "EDCI, DMAP",
            "reagent_smiles": "C1=CC(=S)N(C=C1)O",
            "conditions": "CH2Cl2",
            "yield": "",
            "reactant_smiles": "O=C1[C@@]([C@H]2[C@H]3C[C@H]4CC[N]5C[C@H]6[C@@H](C[C@H](C(=O)O)[C@@](O)([C@H]3N(C=C7)C6=C7C=C2)C4)C5)C8=C1N8",
            "product_smiles": "O=C1[C@@]([C@H]2[C@H]3C[C@H]4CC[N]5C[C@H]6[C@@H](C[C@H](C(=O)ON9C(=S)C=CC=C9)[C@@](O)([C@H]3N(C=C7)C6=C7C=C2)C4)C5)C8=C1N8",
            "notes": "Esterification of the carboxylic acid of Kopsine with 1-hydroxypyridine-2-thione using EDCI and DMAP to form an activated ester.",
            "substeps": []
        },
        {
            "step_id": "21",
            "reaction_type": "Barton Decarboxylation",
            "reagents": "AIBN, Bu3SnH",
            "reagent_smiles": "",
            "conditions": "PhH, reflux",
            "yield": "30% (2 steps)",
            "reactant_smiles": "O=C1CC[C@@H]2C[C@@](O)(C(=O)ON3C(=S)C=CC=C3)[C@@]34CN5CCC[C@H]6[C@]4(C2)C5C(=O)[C@@]63N7C2=CC=CC=C71",
            "product_smiles": "O[C@]12CC[C@@H]3C4CN5CCC[C@H]6[C@]4(C3)C5[C@@H](O)[C@]62N7C2=CC=CC=C71",
            "notes": "Radical decarboxylation of the Barton ester and reduction of the ketone to a secondary alcohol. The tertiary alcohol on the quaternary carbon remains.",
            "substeps": []
        },
        {
            "step_id": "22",
            "reaction_type": "Carbamate Formation / Cyclization",
            "reagents": "triphosgene, pyridine",
            "reagent_smiles": "",
            "conditions": "CH2Cl2, 0 °C",
            "yield": "",
            "reactant_smiles": "O=C1[C@@H]2CCCN3C[C@H]4[C@H]1[C@]5([C@@H](O)[C@@H]2[C@]4(C3)C6=CC=CC=C6N5)C",
            "product_smiles": "O=C1[C@@H]2CCCN3C[C@H]4[C@H]1[C@]5([C@@H]2[C@]4(C3)C6=CC=CC=C6N5C(=O)O)C",
            "notes": "The indole NH and a hydroxyl group of the reactant undergo cyclization with triphosgene to form a cyclic carbamate (an oxazolidinone derivative). The existing ketone group remains unchanged.",
            "substeps": []
        },
        {
            "step_id": "23",
            "reaction_type": "Methanolysis / Lactone ring-opening",
            "reagents": "MeOH",
            "reagent_smiles": "",
            "conditions": "reflux",
            "yield": "42%",
            "reactant_smiles": "C1=CC=C2C(N3C(=O)O[C@@H]4C[C@@]56CCCN7C[C@@H](C[C@]57C4)[C@@]236)=C1",
            "product_smiles": "COC(=O)N1C2=C(C=CC=C2)[C@]34[C@@H]5CN6CCC[C@]7(C=C[C@@]31[C@@H](C7)O)[C@@H]56",
            "notes": "Methanolysis of a complex lactone leading to a ring-opened product with a methyl carbamate and an alcohol.",
            "substeps": []
        }
    ]
}